
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Shioaji is provided by SinoPac the most pythonic API for trading the Taiwan and global financial market. You can use your favorite Python packages such as NumPy, pandas, PyTorch or TensorFlow to build your trading model with integrated the Shioaji API on cross-platform.">
      
      
        <meta name="author" content="Yvictor, ">
      
      
        <link rel="canonical" href="https://sinotrade.github.io/zh_TW/tutor/advanced/quote_binding/">
      
      <link rel="icon" href="https://sinotrade.github.io/images/shioaji-logo-01.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>綁訂報價模式 - Shioaji</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.2505c338.min.css">
        
          
          
          <meta name="theme-color" content="#00bdd6">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+Traditional+Chinese:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Noto Serif Traditional Chinese";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="cyan" data-md-color-accent="amber">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../" title="Shioaji" class="md-header__button md-logo" aria-label="Shioaji" data-md-component="logo">
      
  <img src="../../../../img/shioaji-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Shioaji
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              綁訂報價模式
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="../../../../tutor/advanced/quote_binding/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
              
                <li class="md-select__item">
                  <a href="./" hreflang="zh_TW" class="md-select__link">
                    中文
                  </a>
                </li>
              
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Sinotrade/Shioaji" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Sinotrade/Shioaji
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../" title="Shioaji" class="md-nav__button md-logo" aria-label="Shioaji" data-md-component="logo">
      
  <img src="../../../../img/shioaji-logo.svg" alt="logo">

    </a>
    Shioaji
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Sinotrade/Shioaji" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Sinotrade/Shioaji
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        總覽
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../quickstart/" class="md-nav__link">
        快速入門
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../env_setup/" class="md-nav__link">
        環境設定
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          教程 - 使用者指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="教程 - 使用者指南" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          教程 - 使用者指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          前置作業
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="前置作業" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          前置作業
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/open_account/" class="md-nav__link">
        開戶
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/token/" class="md-nav__link">
        金鑰與憑證申請
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/terms/" class="md-nav__link">
        服務條款簽署
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../prepare/example_testing_flow/" class="md-nav__link">
        測試專案範例
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../login/" class="md-nav__link">
        登入
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contract/" class="md-nav__link">
        商品檔
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          行情資料
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="行情資料" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          行情資料
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4_1" type="checkbox" id="__nav_4_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4_1">
          即時行情
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="即時行情" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_4_1">
          <span class="md-nav__icon md-icon"></span>
          即時行情
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/streaming/stocks/" class="md-nav__link">
        證券
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/streaming/futures/" class="md-nav__link">
        期貨
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/historical/" class="md-nav__link">
        歷史行情
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/snapshot/" class="md-nav__link">
        市場快照
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/short_stock_source/" class="md-nav__link">
        或有券源
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/credit_enquires/" class="md-nav__link">
        資券餘額
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../market_data/scanners/" class="md-nav__link">
        排行
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5" type="checkbox" id="__nav_4_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5">
          下單
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="下單" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_5">
          <span class="md-nav__icon md-icon"></span>
          下單
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/Stock/" class="md-nav__link">
        證券
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/FutureOption/" class="md-nav__link">
        期貨選擇權
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/IntradayOdd/" class="md-nav__link">
        零股
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/Combo/" class="md-nav__link">
        組合單
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/Reserve/" class="md-nav__link">
        預收券款
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/UpdateStatus/" class="md-nav__link">
        查詢狀態
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_5_7" type="checkbox" id="__nav_4_5_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_5_7">
          回報資訊
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="回報資訊" data-md-level="3">
        <label class="md-nav__title" for="__nav_4_5_7">
          <span class="md-nav__icon md-icon"></span>
          回報資訊
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/order_deal_event/stocks/" class="md-nav__link">
        證券
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../order/order_deal_event/futures/" class="md-nav__link">
        期貨
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_6" type="checkbox" id="__nav_4_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_6">
          CallBack
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="CallBack" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_6">
          <span class="md-nav__icon md-icon"></span>
          CallBack
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../callback/orderdeal_event/" class="md-nav__link">
        委託回報
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../callback/event_cb/" class="md-nav__link">
        事件
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_7" type="checkbox" id="__nav_4_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_7">
          帳務
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="帳務" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          帳務
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounting/account_balance/" class="md-nav__link">
        銀行餘額
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounting/margin/" class="md-nav__link">
        保證金
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounting/position/" class="md-nav__link">
        未實現損益
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounting/profit_loss/" class="md-nav__link">
        已實現損益
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../accounting/settlements/" class="md-nav__link">
        結算
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../simulation/" class="md-nav__link">
        模擬模式
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_9" type="checkbox" id="__nav_4_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4_9">
          進階指南
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="進階指南" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_9">
          <span class="md-nav__icon md-icon"></span>
          進階指南
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          綁訂報價模式
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        綁訂報價模式
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    範例
  </a>
  
    <nav class="md-nav" aria-label="範例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    綁訂報價至訊息佇列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-stream" class="md-nav__link">
    將報價推送至Redis Stream
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    觸價委託單
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nonblock/" class="md-nav__link">
        非阻塞模式範例
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../touchorder/" class="md-nav__link">
        觸價委託範例
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../upgrade/" class="md-nav__link">
        升版指南
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../qa/" class="md-nav__link">
        問與答
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../release/" class="md-nav__link">
        發佈版本
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="https://sinotrade.github.io/Shioaji.Csharp/" class="md-nav__link">
        C#
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../limit/" class="md-nav__link">
        使用限制
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    範例
  </a>
  
    <nav class="md-nav" aria-label="範例">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    綁訂報價至訊息佇列
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#redis-stream" class="md-nav__link">
    將報價推送至Redis Stream
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    觸價委託單
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>綁訂報價模式</h1>

<p>Shioaji 提供綁訂報價模式，可以用來將報價儲存於訊息佇列，將報價推送至Redis Stream，或者實現觸價委託單。我們提供以下範例，讓您可以更了解綁訂報價模式如何運作。</p>
<h2 id="_1">範例<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<h3 id="_2">綁訂報價至訊息佇列<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<div class="admonition info">
<p class="admonition-title">In: pythonic way by using decorator</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span><span class="p">,</span> <span class="n">deque</span>
<span class="kn">from</span> <span class="nn">shioaji</span> <span class="kn">import</span> <span class="n">TickFOPv1</span><span class="p">,</span> <span class="n">Exchange</span>

<span class="c1"># set context</span>
<span class="hll"><span class="n">msg_queue</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">deque</span><span class="p">)</span>
</span><span class="n">api</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">msg_queue</span><span class="p">)</span>

<span class="hll"><span class="c1"># In order to use context, set bind=True</span>
</span><span class="nd">@api</span><span class="o">.</span><span class="n">on_tick_fop_v1</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">quote_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">:</span><span class="n">Exchange</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span><span class="n">TickFOPv1</span><span class="p">):</span>
<span class="hll">    <span class="c1"># append quote to message queue</span>
</span>    <span class="bp">self</span><span class="p">[</span><span class="n">tick</span><span class="o">.</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>

<span class="c1"># subscribe</span>
<span class="n">api</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
    <span class="n">api</span><span class="o">.</span><span class="n">Contracts</span><span class="o">.</span><span class="n">Futures</span><span class="o">.</span><span class="n">TXF</span><span class="p">[</span><span class="s1">&#39;TXF202107&#39;</span><span class="p">],</span>
    <span class="n">quote_type</span> <span class="o">=</span> <span class="n">sj</span><span class="o">.</span><span class="n">constant</span><span class="o">.</span><span class="n">QuoteType</span><span class="o">.</span><span class="n">Tick</span><span class="p">,</span> 
    <span class="n">version</span> <span class="o">=</span> <span class="n">sj</span><span class="o">.</span><span class="n">constant</span><span class="o">.</span><span class="n">QuoteVersion</span><span class="o">.</span><span class="n">v1</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="admonition info">
<p class="admonition-title">In: traditional way</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">quote_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">:</span><span class="n">Exchange</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span><span class="n">TickFOPv1</span><span class="p">):</span>
    <span class="c1"># append tick to context</span>
    <span class="bp">self</span><span class="p">[</span><span class="n">tick</span><span class="o">.</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>

<span class="c1"># In order to use context, set bind=True</span>
<span class="n">api</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">set_on_tick_fop_v1_callback</span><span class="p">(</span><span class="n">quote_callback</span><span class="p">,</span> <span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="admonition done">
<p class="admonition-title">Out</p>
<div class="highlight"><pre><span></span><code><span class="c1"># after subscribe and wait for a few seconds ...</span>
<span class="c1"># print(msg_queue)</span>
<span class="n">defaultdict</span><span class="p">(</span><span class="n">collections</span><span class="o">.</span><span class="n">deque</span><span class="p">,</span> 
    <span class="p">{</span>
        <span class="s1">&#39;TXFG1&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="n">Tick</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;TXFG1&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">220000</span><span class="p">),</span> <span class="nb">open</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17755&#39;</span><span class="p">),</span> <span class="n">underlying_price</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17851.88&#39;</span><span class="p">),</span> <span class="n">bid_side_total_vol</span><span class="o">=</span><span class="mi">34824</span><span class="p">,</span> <span class="n">ask_side_total_vol</span><span class="o">=</span><span class="mi">36212</span><span class="p">,</span> <span class="n">avg_price</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17837.053112&#39;</span><span class="p">),</span> <span class="n">close</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17833&#39;</span><span class="p">),</span> <span class="n">high</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17900&#39;</span><span class="p">),</span> <span class="n">low</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17742&#39;</span><span class="p">),</span> <span class="n">amount</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17833&#39;</span><span class="p">),</span> <span class="n">total_amount</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;981323314&#39;</span><span class="p">),</span> <span class="n">volume</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">total_volume</span><span class="o">=</span><span class="mi">55016</span><span class="p">,</span> <span class="n">tick_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chg_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">price_chg</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;184&#39;</span><span class="p">),</span> <span class="n">pct_chg</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.042552&#39;</span><span class="p">),</span> <span class="n">simtrade</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
            <span class="n">Tick</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s1">&#39;TXFG1&#39;</span><span class="p">,</span> <span class="n">datetime</span><span class="o">=</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">781000</span><span class="p">),</span> <span class="nb">open</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17755&#39;</span><span class="p">),</span> <span class="n">underlying_price</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17851.88&#39;</span><span class="p">),</span> <span class="n">bid_side_total_vol</span><span class="o">=</span><span class="mi">34825</span><span class="p">,</span> <span class="n">ask_side_total_vol</span><span class="o">=</span><span class="mi">36213</span><span class="p">,</span> <span class="n">avg_price</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17837.053056&#39;</span><span class="p">),</span> <span class="n">close</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17834&#39;</span><span class="p">),</span> <span class="n">high</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17900&#39;</span><span class="p">),</span> <span class="n">low</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17742&#39;</span><span class="p">),</span> <span class="n">amount</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;17834&#39;</span><span class="p">),</span> <span class="n">total_amount</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;981341148&#39;</span><span class="p">),</span> <span class="n">volume</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">total_volume</span><span class="o">=</span><span class="mi">55017</span><span class="p">,</span> <span class="n">tick_type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">chg_type</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">price_chg</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;185&#39;</span><span class="p">),</span> <span class="n">pct_chg</span><span class="o">=</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;1.048218&#39;</span><span class="p">),</span> <span class="n">simtrade</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre></div>
</div>
<h3 id="redis-stream">將報價推送至Redis Stream<a class="headerlink" href="#redis-stream" title="Permanent link">&para;</a></h3>
<p>在開始之前，請先安裝<a href="https://github.com/andymccurdy/redis-py">redis</a>。</p>
<div class="admonition info">
<p class="admonition-title">In</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">redis</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">shioaji</span> <span class="kn">import</span> <span class="n">TickFOPv1</span><span class="p">,</span> <span class="n">Exchange</span>

<span class="c1"># redis setting</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">redis</span><span class="o">.</span><span class="n">Redis</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="s1">&#39;localhost&#39;</span><span class="p">,</span> <span class="n">port</span><span class="o">=</span><span class="mi">6379</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">decode_responses</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="hll"><span class="c1"># set up context</span>
</span><span class="n">api</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>

<span class="hll"><span class="c1"># In order to use context, set bind=True</span>
</span><span class="nd">@api</span><span class="o">.</span><span class="n">on_tick_fop_v1</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">quote_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">:</span><span class="n">Exchange</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span><span class="n">TickFOPv1</span><span class="p">):</span>
    <span class="c1"># push them to redis stream</span>
<span class="hll">    <span class="n">channel</span> <span class="o">=</span> <span class="s1">&#39;Q:&#39;</span> <span class="o">+</span> <span class="n">tick</span><span class="o">.</span><span class="n">code</span> <span class="c1"># =&#39;Q:TXFG1&#39; in this example</span>
</span>    <span class="bp">self</span><span class="o">.</span><span class="n">xadd</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;tick&#39;</span><span class="p">:</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">tick</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">raw</span><span class="o">=</span><span class="kc">True</span><span class="p">))})</span>
</code></pre></div>
</div>
<div class="admonition done">
<p class="admonition-title">Out</p>
<div class="highlight"><pre><span></span><code><span class="c1"># after subscribe and wait for a few seconds ...</span>
<span class="c1"># r.xread({&#39;Q:TXFG1&#39;:&#39;0-0&#39;})</span>
<span class="p">[</span>
    <span class="p">[</span><span class="s1">&#39;Q:TXFG1&#39;</span><span class="p">,</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="s1">&#39;1625454940107-0&#39;</span><span class="p">,</span>
                <span class="p">{</span><span class="s1">&#39;tick&#39;</span><span class="p">:</span> 
                    <span class="s1">&#39;{&quot;code&quot;: &quot;TXFG1&quot;, &quot;datetime&quot;: &quot;2021-07-05T11:15:49.066000&quot;, &quot;open&quot;: &quot;17755&quot;, &quot;underlying_price&quot;: &quot;17904.03&quot;, &quot;bid_side_total_vol&quot;: 49698, &quot;ask_side_total_vol&quot;: 51490, &quot;avg_price&quot;: &quot;17851.312322&quot;, &quot;close&quot;: &quot;17889&quot;, &quot;high&quot;: &quot;17918&quot;, &quot;low&quot;: &quot;17742&quot;, &quot;amount&quot;: &quot;268335&quot;, &quot;total_amount&quot;: &quot;1399310819&quot;, &quot;volume&quot;: 15, &quot;total_volume&quot;: 78387, &quot;tick_type&quot;: 2, &quot;chg_type&quot;: 2, &quot;price_chg&quot;: &quot;240&quot;, &quot;pct_chg&quot;: &quot;1.35985&quot;, &quot;simtrade&quot;: 0}&#39;</span>
                <span class="p">}</span>
            <span class="p">),</span>
            <span class="p">(</span><span class="s1">&#39;1625454941854-0&#39;</span><span class="p">,</span>
                <span class="p">{</span><span class="s1">&#39;tick&#39;</span><span class="p">:</span> 
                    <span class="s1">&#39;{&quot;code&quot;: &quot;TXFG1&quot;, &quot;datetime&quot;: &quot;2021-07-05T11:15:50.815000&quot;, &quot;open&quot;: &quot;17755&quot;, &quot;underlying_price&quot;: &quot;17902.58&quot;, &quot;bid_side_total_vol&quot;: 49702, &quot;ask_side_total_vol&quot;: 51478, &quot;avg_price&quot;: &quot;17851.313258&quot;, &quot;close&quot;: &quot;17888&quot;, &quot;high&quot;: &quot;17918&quot;, &quot;low&quot;: &quot;17742&quot;, &quot;amount&quot;: &quot;35776&quot;, &quot;total_amount&quot;: &quot;1399346595&quot;, &quot;volume&quot;: 2, &quot;total_volume&quot;: 78389, &quot;tick_type&quot;: 2, &quot;chg_type&quot;: 2, &quot;price_chg&quot;: &quot;239&quot;, &quot;pct_chg&quot;: &quot;1.354184&quot;, &quot;simtrade&quot;: 0}&#39;</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">]</span>


<span class="c1"># parse redis stream</span>
<span class="c1"># [json.loads(x[-1][&#39;tick&#39;]) for x in r.xread({&#39;Q:TXFG1&#39;:&#39;0-0&#39;})[0][-1]]</span>
<span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;TXFG1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;2021-07-05T11:15:49.066000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;open&#39;</span><span class="p">:</span> <span class="s1">&#39;17755&#39;</span><span class="p">,</span>
        <span class="s1">&#39;underlying_price&#39;</span><span class="p">:</span> <span class="s1">&#39;17904.03&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bid_side_total_vol&#39;</span><span class="p">:</span> <span class="mi">49698</span><span class="p">,</span>
        <span class="s1">&#39;ask_side_total_vol&#39;</span><span class="p">:</span> <span class="mi">51490</span><span class="p">,</span>
        <span class="s1">&#39;avg_price&#39;</span><span class="p">:</span> <span class="s1">&#39;17851.312322&#39;</span><span class="p">,</span>
        <span class="s1">&#39;close&#39;</span><span class="p">:</span> <span class="s1">&#39;17889&#39;</span><span class="p">,</span>
        <span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="s1">&#39;17918&#39;</span><span class="p">,</span>
        <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="s1">&#39;17742&#39;</span><span class="p">,</span>
        <span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="s1">&#39;268335&#39;</span><span class="p">,</span>
        <span class="s1">&#39;total_amount&#39;</span><span class="p">:</span> <span class="s1">&#39;1399310819&#39;</span><span class="p">,</span>
        <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="s1">&#39;total_volume&#39;</span><span class="p">:</span> <span class="mi">78387</span><span class="p">,</span>
        <span class="s1">&#39;tick_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;chg_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;price_chg&#39;</span><span class="p">:</span> <span class="s1">&#39;240&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pct_chg&#39;</span><span class="p">:</span> <span class="s1">&#39;1.35985&#39;</span><span class="p">,</span>
        <span class="s1">&#39;simtrade&#39;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;TXFG1&#39;</span><span class="p">,</span>
        <span class="s1">&#39;datetime&#39;</span><span class="p">:</span> <span class="s1">&#39;2021-07-05T11:15:50.815000&#39;</span><span class="p">,</span>
        <span class="s1">&#39;open&#39;</span><span class="p">:</span> <span class="s1">&#39;17755&#39;</span><span class="p">,</span>
        <span class="s1">&#39;underlying_price&#39;</span><span class="p">:</span> <span class="s1">&#39;17902.58&#39;</span><span class="p">,</span>
        <span class="s1">&#39;bid_side_total_vol&#39;</span><span class="p">:</span> <span class="mi">49702</span><span class="p">,</span>
        <span class="s1">&#39;ask_side_total_vol&#39;</span><span class="p">:</span> <span class="mi">51478</span><span class="p">,</span>
        <span class="s1">&#39;avg_price&#39;</span><span class="p">:</span> <span class="s1">&#39;17851.313258&#39;</span><span class="p">,</span>
        <span class="s1">&#39;close&#39;</span><span class="p">:</span> <span class="s1">&#39;17888&#39;</span><span class="p">,</span>
        <span class="s1">&#39;high&#39;</span><span class="p">:</span> <span class="s1">&#39;17918&#39;</span><span class="p">,</span>
        <span class="s1">&#39;low&#39;</span><span class="p">:</span> <span class="s1">&#39;17742&#39;</span><span class="p">,</span>
        <span class="s1">&#39;amount&#39;</span><span class="p">:</span> <span class="s1">&#39;35776&#39;</span><span class="p">,</span>
        <span class="s1">&#39;total_amount&#39;</span><span class="p">:</span> <span class="s1">&#39;1399346595&#39;</span><span class="p">,</span>
        <span class="s1">&#39;volume&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;total_volume&#39;</span><span class="p">:</span> <span class="mi">78389</span><span class="p">,</span>
        <span class="s1">&#39;tick_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;chg_type&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s1">&#39;price_chg&#39;</span><span class="p">:</span> <span class="s1">&#39;239&#39;</span><span class="p">,</span>
        <span class="s1">&#39;pct_chg&#39;</span><span class="p">:</span> <span class="s1">&#39;1.354184&#39;</span><span class="p">,</span>
        <span class="s1">&#39;simtrade&#39;</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
<span class="p">]</span>
</code></pre></div>
</div>
<h3 id="_3">觸價委託單<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p><a href="https://www.investopedia.com/terms/s/stoporder.asp">觸價委託單</a>，在市場價格觸及委託單上所設定之價位時，委託單立刻轉為限價單或市價單。</p>
<p><strong>以下僅為範例，請小心使用並自行承擔風險</strong></p>
<div class="admonition info">
<p class="admonition-title">Example: stop order</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Union</span>

<span class="kn">import</span> <span class="nn">shioaji</span> <span class="k">as</span> <span class="nn">sj</span>

<span class="k">class</span> <span class="nc">StopOrderExcecutor</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">api</span><span class="p">:</span> <span class="n">sj</span><span class="o">.</span><span class="n">Shioaji</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">api</span> <span class="o">=</span> <span class="n">api</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">on_quote</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">quote</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">sj</span><span class="o">.</span><span class="n">BidAskFOPv1</span><span class="p">,</span> <span class="n">sj</span><span class="o">.</span><span class="n">BidAskSTKv1</span><span class="p">,</span> <span class="n">sj</span><span class="o">.</span><span class="n">TickFOPv1</span><span class="p">,</span> <span class="n">sj</span><span class="o">.</span><span class="n">TickSTKv1</span><span class="p">]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">quote</span><span class="o">.</span><span class="n">code</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">stop_order</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">stop_order</span><span class="p">[</span><span class="s1">&#39;executed&#39;</span><span class="p">]:</span>
                    <span class="k">continue</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">quote</span><span class="p">,</span> <span class="s2">&quot;ask_price&quot;</span><span class="p">):</span>
                    <span class="n">price</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span>
                        <span class="n">quote</span><span class="o">.</span><span class="n">bid_price</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">quote</span><span class="o">.</span><span class="n">ask_price</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="p">)</span>  <span class="c1"># mid price</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">price</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">quote</span><span class="o">.</span><span class="n">close</span><span class="p">)</span>  <span class="c1"># Tick</span>

                <span class="n">is_execute</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;stop_price&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;ref_price&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">price</span> <span class="o">&gt;=</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;stop_price&quot;</span><span class="p">]:</span>
                        <span class="n">is_execute</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">elif</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;stop_price&quot;</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;ref_price&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">price</span> <span class="o">&lt;=</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;stop_price&quot;</span><span class="p">]:</span>
                        <span class="n">is_execute</span> <span class="o">=</span> <span class="kc">True</span>

                <span class="k">if</span> <span class="n">is_execute</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">place_order</span><span class="p">(</span><span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;contract&quot;</span><span class="p">],</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;pending_order&quot;</span><span class="p">])</span>
                    <span class="n">stop_order</span><span class="p">[</span><span class="s1">&#39;executed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">stop_order</span><span class="p">[</span><span class="s1">&#39;ts_executed&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;execute stop order: </span><span class="si">{</span><span class="n">stop_order</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_stop_order</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">contract</span><span class="p">:</span> <span class="n">sj</span><span class="o">.</span><span class="n">contracts</span><span class="o">.</span><span class="n">Contract</span><span class="p">,</span>
        <span class="n">stop_price</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
        <span class="n">order</span><span class="p">:</span> <span class="n">sj</span><span class="o">.</span><span class="n">order</span><span class="o">.</span><span class="n">Order</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">code</span>
        <span class="n">snap</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">api</span><span class="o">.</span><span class="n">snapshots</span><span class="p">([</span><span class="n">contract</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
        <span class="c1"># use mid price as current price to avoid illiquidity</span>
        <span class="n">ref_price</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">snap</span><span class="o">.</span><span class="n">buy_price</span> <span class="o">+</span> <span class="n">snap</span><span class="o">.</span><span class="n">sell_price</span><span class="p">)</span>
        <span class="n">stop_order</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;code&quot;</span><span class="p">:</span> <span class="n">contract</span><span class="o">.</span><span class="n">code</span><span class="p">,</span>
            <span class="s2">&quot;stop_price&quot;</span><span class="p">:</span> <span class="n">stop_price</span><span class="p">,</span>
            <span class="s2">&quot;ref_price&quot;</span><span class="p">:</span> <span class="n">ref_price</span><span class="p">,</span>
            <span class="s2">&quot;contract&quot;</span><span class="p">:</span> <span class="n">contract</span><span class="p">,</span>
            <span class="s2">&quot;pending_order&quot;</span><span class="p">:</span> <span class="n">order</span><span class="p">,</span>
            <span class="s2">&quot;ts_create&quot;</span><span class="p">:</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">(),</span>
            <span class="s2">&quot;executed&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
            <span class="s2">&quot;ts_executed&quot;</span><span class="p">:</span> <span class="mf">0.0</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="n">code</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stop_order</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;add stop order: </span><span class="si">{</span><span class="n">stop_order</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_stop_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span>

    <span class="k">def</span> <span class="nf">cancel_stop_order_by_code</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cancel_stop_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop_order</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">code</span> <span class="o">=</span> <span class="n">stop_order</span><span class="p">[</span><span class="s2">&quot;code&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">code</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">stop_order</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="p">[</span><span class="n">code</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">code</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">cancel_all_stop_orders</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_orders</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</code></pre></div>
</div>
<ul>
<li>使用snapshots的中價作為參考價格，以區分觸價委託單的方向。</li>
</ul>
<p>基本上，委託單會在您的電腦上待命，只有在商品價格觸擊所設定價格時，觸價委託單才會被送出，以下範例顯示如何提交限價觸價委託單(Stop-Limit Order)。</p>
<div class="admonition info">
<p class="admonition-title">Set up a stop order</p>
<div class="highlight"><pre><span></span><code><span class="c1"># shioaji order</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Contracts</span><span class="o">.</span><span class="n">Futures</span><span class="o">.</span><span class="n">TXF</span><span class="p">[</span><span class="s1">&#39;TXF202301&#39;</span><span class="p">]</span>
<span class="n">order</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">Order</span><span class="p">(</span>
    <span class="n">action</span><span class="o">=</span><span class="s1">&#39;Buy&#39;</span><span class="p">,</span>
    <span class="n">price</span><span class="o">=</span><span class="mi">14800</span><span class="p">,</span>
    <span class="n">quantity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">price_type</span><span class="o">=</span><span class="s1">&#39;LMT&#39;</span><span class="p">,</span>
    <span class="n">order_type</span><span class="o">=</span><span class="s1">&#39;ROD&#39;</span><span class="p">,</span> 
    <span class="n">octype</span><span class="o">=</span><span class="n">sj</span><span class="o">.</span><span class="n">constant</span><span class="o">.</span><span class="n">FuturesOCType</span><span class="o">.</span><span class="n">Auto</span><span class="p">,</span>
    <span class="n">account</span><span class="o">=</span><span class="n">api</span><span class="o">.</span><span class="n">futopt_account</span>
<span class="p">)</span>

<span class="c1"># Stop Order Excecutor</span>
<span class="hll"><span class="n">soe</span> <span class="o">=</span> <span class="n">StopOrderExcecutor</span><span class="p">(</span><span class="n">api</span><span class="p">)</span>
</span><span class="hll"><span class="n">soe</span><span class="o">.</span><span class="n">add_stop_order</span><span class="p">(</span><span class="n">contract</span><span class="o">=</span><span class="n">contract</span><span class="p">,</span> <span class="n">stop_price</span><span class="o">=</span><span class="mi">14805</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="n">order</span><span class="p">)</span>
</span></code></pre></div>
</div>
<div class="admonition done">
<p class="admonition-title">Out</p>
<div class="highlight"><pre><span></span><code><span class="n">add</span> <span class="n">stop</span> <span class="n">order</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;TXFA3&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;stop_price&#39;</span><span class="p">:</span> <span class="mi">14805</span><span class="p">,</span> 
    <span class="s1">&#39;ref_price&#39;</span><span class="p">:</span> <span class="mi">14790</span><span class="p">,</span>
    <span class="s1">&#39;contract&#39;</span><span class="p">:</span> <span class="n">Future</span><span class="p">(</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;TXFA3&#39;</span><span class="p">,</span> 
        <span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;TXF202301&#39;</span><span class="p">,</span> 
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;臺股期貨01&#39;</span><span class="p">,</span> 
        <span class="n">category</span><span class="o">=</span><span class="s1">&#39;TXF&#39;</span><span class="p">,</span> 
        <span class="n">delivery_month</span><span class="o">=</span><span class="s1">&#39;202301&#39;</span><span class="p">,</span> 
        <span class="n">delivery_date</span><span class="o">=</span><span class="s1">&#39;2023/01/30&#39;</span><span class="p">,</span> 
        <span class="n">underlying_kind</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> 
        <span class="n">unit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">limit_up</span><span class="o">=</span><span class="mf">16241.0</span><span class="p">,</span> 
        <span class="n">limit_down</span><span class="o">=</span><span class="mf">13289.0</span><span class="p">,</span> 
        <span class="n">reference</span><span class="o">=</span><span class="mf">14765.0</span><span class="p">,</span> 
        <span class="n">update_date</span><span class="o">=</span><span class="s1">&#39;2023/01/10&#39;</span>
    <span class="p">),</span> 
    <span class="s1">&#39;pending_order&#39;</span><span class="p">:</span> <span class="n">Order</span><span class="p">(</span>
        <span class="n">action</span><span class="o">=&lt;</span><span class="n">Action</span><span class="o">.</span><span class="n">Buy</span><span class="p">:</span> <span class="s1">&#39;Buy&#39;</span><span class="o">&gt;</span><span class="p">,</span> 
        <span class="n">price</span><span class="o">=</span><span class="mi">14800</span><span class="p">,</span> 
        <span class="n">quantity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">account</span><span class="o">=</span><span class="n">FutureAccount</span><span class="p">(</span><span class="n">person_id</span><span class="o">=</span><span class="s1">&#39;A123456789&#39;</span><span class="p">,</span> <span class="n">broker_id</span><span class="o">=</span><span class="s1">&#39;F002000&#39;</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="s1">&#39;1234567&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;PAIUSER&#39;</span><span class="p">),</span>
        <span class="n">price_type</span><span class="o">=&lt;</span><span class="n">StockPriceType</span><span class="o">.</span><span class="n">LMT</span><span class="p">:</span> <span class="s1">&#39;LMT&#39;</span><span class="o">&gt;</span><span class="p">,</span> 
        <span class="n">order_type</span><span class="o">=&lt;</span><span class="n">OrderType</span><span class="o">.</span><span class="n">ROD</span><span class="p">:</span> <span class="s1">&#39;ROD&#39;</span><span class="o">&gt;</span>
    <span class="p">),</span> 
    <span class="s1">&#39;ts_create&#39;</span><span class="p">:</span> <span class="mf">1673329115.1056178</span><span class="p">,</span> 
    <span class="s1">&#39;executed&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span> 
    <span class="s1">&#39;ts_executed&#39;</span><span class="p">:</span> <span class="mf">0.0</span>
<span class="p">}</span>
</code></pre></div>
</div>
<ul>
<li>市價觸價委託單(Stop-Market Order): <code>price_type = 'MKT'</code></li>
</ul>
<p>最後，我們將<code>StopOrderExcecutor</code>綁訂在報價上。請注意，您必須訂略商品報價，觸價委託單才會執行。</p>
<div class="admonition info">
<p class="admonition-title">Set up context and callback function</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">shioaji</span> <span class="kn">import</span> <span class="n">TickFOPv1</span><span class="p">,</span> <span class="n">Exchange</span>

<span class="c1"># set up context</span>
<span class="hll"><span class="n">api</span><span class="o">.</span><span class="n">set_context</span><span class="p">(</span><span class="n">soe</span><span class="p">)</span>
</span>
<span class="c1"># In order to use context, set bind=True</span>
<span class="nd">@api</span><span class="o">.</span><span class="n">on_tick_fop_v1</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">quote_callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">exchange</span><span class="p">:</span><span class="n">Exchange</span><span class="p">,</span> <span class="n">tick</span><span class="p">:</span><span class="n">TickFOPv1</span><span class="p">):</span>
    <span class="c1"># pass tick object to Stop Order Excecutor</span>
<span class="hll">    <span class="bp">self</span><span class="o">.</span><span class="n">on_quote</span><span class="p">(</span><span class="n">tick</span><span class="p">)</span>
</span>
<span class="c1"># subscribe</span>
<span class="n">api</span><span class="o">.</span><span class="n">quote</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span>
    <span class="n">contract</span><span class="p">,</span>
    <span class="n">quote_type</span> <span class="o">=</span> <span class="n">sj</span><span class="o">.</span><span class="n">constant</span><span class="o">.</span><span class="n">QuoteType</span><span class="o">.</span><span class="n">Tick</span><span class="p">,</span> 
    <span class="n">version</span> <span class="o">=</span> <span class="n">sj</span><span class="o">.</span><span class="n">constant</span><span class="o">.</span><span class="n">QuoteVersion</span><span class="o">.</span><span class="n">v1</span>
<span class="p">)</span>
</code></pre></div>
</div>
<div class="admonition done">
<p class="admonition-title">Out: Once close/mid price hit stop price</p>
<div class="highlight"><pre><span></span><code><span class="n">execute</span> <span class="n">stop</span> <span class="n">order</span><span class="p">:</span> <span class="p">{</span>
    <span class="s1">&#39;code&#39;</span><span class="p">:</span> <span class="s1">&#39;TXFA3&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;stop_price&#39;</span><span class="p">:</span> <span class="mi">14805</span><span class="p">,</span> 
    <span class="s1">&#39;ref_price&#39;</span><span class="p">:</span> <span class="mi">14790</span><span class="p">,</span> 
    <span class="s1">&#39;contract&#39;</span><span class="p">:</span> <span class="n">Future</span><span class="p">(</span>
        <span class="n">code</span><span class="o">=</span><span class="s1">&#39;TXFA3&#39;</span><span class="p">,</span> 
        <span class="n">symbol</span><span class="o">=</span><span class="s1">&#39;TXF202301&#39;</span><span class="p">,</span> 
        <span class="n">name</span><span class="o">=</span><span class="s1">&#39;臺股期貨01&#39;</span><span class="p">,</span> 
        <span class="n">category</span><span class="o">=</span><span class="s1">&#39;TXF&#39;</span><span class="p">,</span> 
        <span class="n">delivery_month</span><span class="o">=</span><span class="s1">&#39;202301&#39;</span><span class="p">,</span> 
        <span class="n">delivery_date</span><span class="o">=</span><span class="s1">&#39;2023/01/30&#39;</span><span class="p">,</span> 
        <span class="n">underlying_kind</span><span class="o">=</span><span class="s1">&#39;I&#39;</span><span class="p">,</span> 
        <span class="n">unit</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">limit_up</span><span class="o">=</span><span class="mf">16241.0</span><span class="p">,</span> 
        <span class="n">limit_down</span><span class="o">=</span><span class="mf">13289.0</span><span class="p">,</span> 
        <span class="n">reference</span><span class="o">=</span><span class="mf">14765.0</span><span class="p">,</span> 
        <span class="n">update_date</span><span class="o">=</span><span class="s1">&#39;2023/01/10&#39;</span>
    <span class="p">),</span> 
    <span class="s1">&#39;pending_order&#39;</span><span class="p">:</span> <span class="n">Order</span><span class="p">(</span>
        <span class="n">action</span><span class="o">=&lt;</span><span class="n">Action</span><span class="o">.</span><span class="n">Buy</span><span class="p">:</span> <span class="s1">&#39;Buy&#39;</span><span class="o">&gt;</span><span class="p">,</span> 
        <span class="n">price</span><span class="o">=</span><span class="mi">14800</span><span class="p">,</span> 
        <span class="n">quantity</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> 
        <span class="n">account</span><span class="o">=</span><span class="n">FutureAccount</span><span class="p">(</span><span class="n">person_id</span><span class="o">=</span><span class="s1">&#39;A123456789&#39;</span><span class="p">,</span> <span class="n">broker_id</span><span class="o">=</span><span class="s1">&#39;F002000&#39;</span><span class="p">,</span> <span class="n">account_id</span><span class="o">=</span><span class="s1">&#39;1234567&#39;</span><span class="p">,</span> <span class="n">signed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">username</span><span class="o">=</span><span class="s1">&#39;PAIUSER&#39;</span><span class="p">),</span>
        <span class="n">price_type</span><span class="o">=&lt;</span><span class="n">StockPriceType</span><span class="o">.</span><span class="n">LMT</span><span class="p">:</span> <span class="s1">&#39;LMT&#39;</span><span class="o">&gt;</span><span class="p">,</span> 
        <span class="n">order_type</span><span class="o">=&lt;</span><span class="n">OrderType</span><span class="o">.</span><span class="n">ROD</span><span class="p">:</span> <span class="s1">&#39;ROD&#39;</span><span class="o">&gt;</span>
    <span class="p">),</span> 
    <span class="s1">&#39;ts_create&#39;</span><span class="p">:</span> <span class="mf">1673329115.1056178</span><span class="p">,</span> 
    <span class="s1">&#39;executed&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> 
    <span class="s1">&#39;ts_executed&#39;</span><span class="p">:</span> <span class="mf">1673329161.3224185</span>
<span class="p">}</span>
</code></pre></div>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../simulation/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 模擬模式" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              模擬模式
            </div>
          </div>
        </a>
      
      
        
        <a href="../nonblock/" class="md-footer__link md-footer__link--next" aria-label="Next: 非阻塞模式範例" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              非阻塞模式範例
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/Sinotrade/Shioaji" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": [], "search": "../../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>